# ts-lambda-template

Generated with `sam init`:

- AWS Quick Start Template
- Zip
- nodejs12.x
- ts-lambda-template

## Setup

To include a Lambda layer add data in the following format to `template.yaml`

Layers: - !Ref arn:aws:lambda:us-east-1:<LAYER_ARN>:layer:<LAYER_NAME>:1

Layer ARN's are available in the AWS Console.

## app.ts

Configured for `HELLO WORLD`. Configure with layer for access to npm modules (ex. moment) or `env` variables.

Values set in local `.env` need to be set in the AWS console as well.

## TS Config

Lambda code is compiled from `/src/app.ts` to `/deploy/app.js` via `npm run compile`. The following is set as defaults in `tsconfig.json`:

```json
{
  "compilerOptions": {
    "outDir": "./deploy",
    "module": "CommonJS",
    "target": "ES2017",
    "sourceMap": true,
    "noImplicitAny": true,
    "preserveConstEnums": true,
    "allowSyntheticDefaultImports": true
  }
}
```

`ES2017` is targeted for `async` and `await`.

## Deploy

Build path is set in `template.yaml`:

```toml
    Properties:
      CodeUri: hello-world/deploy
```

Deployments are done with the AWS SAM tool. To install SAM on macOS run:
`brew tap aws/tap; brew install aws-sam-cli`; you will need Docker installed.

On first deployment, run `sam deploy --guided`. Additional deployments can be ran with `sam deploy`. A `samconfig.toml` is not included in the template.

Additional deployments can also be made with `npm run deploy`.

Note: First set credentials with `aws configure` or `aws configure --profile profile_name`.

## Context

The autogenerated README.md is available as README1.md

## Gitignore

IDE configurations are excluded.

## samconfig.toml

Intentionally excluded from template. Generate with `sam deploy --guided`
